{
    "name": "Flutter 4 Android",
    "build": {
        "dockerfile": "Dockerfile",
        "options": ["--tag", "flutter4android"],
        "args": {
            "USERNAME": "${localEnv:USER}${localEnv:USERNAME}"
        }
    },

    "containerEnv": {
        "SHELL": "/bin/bash"
    },

    "runArgs": [
        "--platform",
        "linux/amd64",
        "--name",
        "${localWorkspaceFolderBasename}_flutter4android_devcontainer"
    ],

    "mounts": [
		// "source=${localWorkspaceFolder}/.devcontainer/.bashrc,target=/home/${localEnv:USER}${localEnv:USERNAME}/.bashrc.1,readonly,type=bind"
        "source=${localWorkspaceFolder}/.devcontainer/.bashrc,target=/root/.bashrc.1,readonly,type=bind"
	],

    // "initializeCommand": "",
    "onCreateCommand": "bash ./.devcontainer/on-create.sh",
    // "updateContentCommand": "",
    // "postCreateCommand": "flutter doctor && cp .devcontainer/.bashrc ~/.bashrc",
    // "postStartCommand": "",
    "postAttachCommand": "bash ./.devcontainer/post-attach.sh",

    "waitFor": "onCreateCommand",

    "remoteUser": "${localEnv:USER}${localEnv:USERNAME}",

    "features": {
        "ghcr.io/devcontainers-extra/features/starship": {},
        "ghcr.io/devcontainers-contrib/features/go-task:1": {}
    },

    "customizations": {
        "vscode": {
            "extensions": [
                "Dart-Code.dart-code",
                "Dart-Code.flutter",
                "task.vscode-task",
                "redhat.vscode-yaml"
            ]
        }
    }
}